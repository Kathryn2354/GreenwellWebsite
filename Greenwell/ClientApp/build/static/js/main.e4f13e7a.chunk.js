(this.webpackJsonpgreenwell=this.webpackJsonpgreenwell||[]).push([[0],{110:function(e,t,n){},149:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAyCAYAAAAayliMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAANdSURBVGhD7ZjZTxNRFIf9h9zik8blwRiJiUukgBoXwhpAZOlO6YIUSm2BTrHrbMzwhx7PmdJpbQ/T2UjRzMP30k7v/X0z5849vbfCF5PwLxMIjJtrE0jon2FXm2e/85NrEYjoIRDkIrSlJqS1RfYav/BdIHIRgpKaAUmSDGpyBeL6J/ZaP/BdIKetYXDRFCDqsgBRfZq93iu+CmS0ZSybthG6XP8NkXLBlCgrWfY3XvFNIKZ/xDtdNcI22i14tbsFt7fmIV0pmxIFNYbXhoZ+6wVfBGL6B6z1UyNkWxRhKhc3whMPYysgNOqd76QWPqUldgy3eBYwFq3SW7TrxTzc3V4wBYin8TUQml2JJqS0OXYsN3gWKKhxM3zqtPRX8H7eZ2PmdfRm4sZygycBWrQtvKMU6hgX7aPYKhu+y2w+DSKWGF0vKEV8M82w4zrBtUBS+wYi1jSFOWs24AmWCRe6Hyotekri5ZM4UhM4lrdF7U4Ad9ozufd2mcTy4AJz3A8vQk44Nn4n4n6RV8P8HDZxLBC9mIYTJd8JgOWwcJhlg1rxLPEdKpdvppbUwJ5pgZ3LDo4FDs7D5p3fq54OvXHs8ji+CnXcLzpPoo3N3xd2vlE4Etg7Xzcmo0n3MfyD8BIbzg53kJm9hLkeqnIJm8Apdl4rbAsk8Q41pZoxGd2558kfbDCnUAl2JSpyAfcVZxK2BKibbMhnxiTUJkykNtkwbqBF3Ws3RDg02g0+B4cNgVBv0SJzBxnj8XNh3HJvexHyWJJdCSpVPsswIwVKavpyYAk2SwdsAD+gfYT6KJqH3kxx/EfH5RnEUuBn36KlzepNJgIvdjZMJlJb8BLhAllBDd7rdHiI5ULOlKCSTepf2Vz9XClADVc3vBXFWpUNacU0vn24sQapKKMXNSsQxfaY/kVxgw5CrTIX0op3mSg7FseJsm90vFxOghXY0WexfDYsEZQjY4IqtslcSCveYil2A+bPtyGrrQxBjSLt0HSyEcHdn8tJjFzEV/FL3fVFgG4WN75dAoFAIBBgPrRDIPC/CHg9wR67QNrjQVcgEAgEAsyHdggEbooAnVLQ0YgTouXOf4kbIeCVsQnQyXJTrnnGy7ko4VqAzvbpwMsrTk/iBnEtcFMIBMZNIDBeJuEPrJFYavO5yqwAAAAASUVORK5CYII="},150:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAABH0lEQVQ4T62U4VXDMAyE71ZgBBgBRigj0BHKCDBCOwIdgYwAI7QjwAoZ4XiXWnmKn9sUiP4lsj+fLJ2JKiTdAtgAWAG4L+lvAJ8A9iSP9Z74Zk5I2gJ4Obe4/N8DeCXZ1+tGmKR3AE8zoEhb5boGDrCGIpeyAxAludwoPYAdyXU+nJK88JB++l6eWwobhz6StMohDHsrp/r7SPLhUqmSPkpzvGyizrAvAO6gw/fQzcDcZQMdPcmbrExp8x1Jj8HFkNTcY2WLwhYtc9EG/GY07A67JGLSsBjarG4YkSuG1nZyw0ZbZTvl+ZlraOQntqqNXitsQa06XhPnR+AE5kyxlw1/9glq2OoEvLaeel0D2P0ZVqrI71//L1gBelx8LbsfbpWbBqwYWc0AAAAASUVORK5CYII="},158:function(e,t,n){e.exports=n(311)},169:function(e,t,n){},307:function(e,t,n){},308:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);n(159),n(110);var a=n(1),r=n.n(a),s=n(21),o=n.n(s),i=n(22),l=n(15),c=n(16),u=n(18),d=n(17),h=n(19),m=n(25),p=n(71),f=n(24),g=n(7),v=n.n(g),b=n(33),w=n(10),y=n(102),k="returnUrl",A="message",E="logout-callback",x="logout",S="logged-out",F="login",O="login-callback",j="login-failed",U="profile",C="/authentication",M={DefaultLoginRedirectPath:"/",ApiAuthorizationClientConfigurationUrl:"/_configuration/".concat("Greenwell"),ApiAuthorizationPrefix:C,Login:"".concat(C,"/").concat(F),LoginFailed:"".concat(C,"/").concat(j),LoginCallback:"".concat(C,"/").concat(O),Profile:"".concat(C,"/").concat(U),LogOut:"".concat(C,"/").concat(x),LoggedOut:"".concat(C,"/").concat(S),LogOutCallback:"".concat(C,"/").concat(E),IdentityManagePath:"/Identity/Account/Manage"},N=new(function(){function e(){Object(l.a)(this,e),this._callbacks=[],this._nextSubscriptionId=0,this._user=null,this._isAuthenticated=!1,this._popUpDisabled=!0}return Object(c.a)(e,[{key:"isAuthenticated",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return t=e.sent,e.abrupt("return",!!t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._user||!this._user.profile){e.next=2;break}return e.abrupt("return",this._user.profile);case 2:return e.next=4,this.ensureUserManagerInitialized();case 4:return e.next=6,this.userManager.getUser();case 6:return t=e.sent,e.abrupt("return",t&&t.profile);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.next=4,this.userManager.getUser();case 4:return t=e.sent,e.abrupt("return",t&&t.access_token);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signinSilent(this.createArguments());case 5:return n=e.sent,this.updateState(n),e.abrupt("return",this.success(t));case 10:if(e.prev=10,e.t0=e.catch(2),console.log("Silent authentication error: ",e.t0),e.prev=13,!this._popUpDisabled){e.next=16;break}throw new Error("Popup disabled. Change 'AuthorizeService.js:AuthorizeService._popupDisabled' to false to enable it.");case 16:return e.next=18,this.userManager.signinPopup(this.createArguments());case 18:return a=e.sent,this.updateState(a),e.abrupt("return",this.success(t));case 23:if(e.prev=23,e.t1=e.catch(13),"Popup window closed"!==e.t1.message){e.next=29;break}return e.abrupt("return",this.error("The user closed the window."));case 29:this._popUpDisabled||console.log("Popup authentication error: ",e.t1);case 30:return e.prev=30,e.next=33,this.userManager.signinRedirect(this.createArguments(t));case 33:return e.abrupt("return",this.redirect());case 36:return e.prev=36,e.t2=e.catch(30),console.log("Redirect authentication error: ",e.t2),e.abrupt("return",this.error(e.t2));case 40:case"end":return e.stop()}}),e,this,[[2,10],[13,23],[30,36]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignIn",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ensureUserManagerInitialized();case 3:return e.next=5,this.userManager.signinCallback(t);case 5:return n=e.sent,this.updateState(n),e.abrupt("return",this.success(n&&n.state));case 10:return e.prev=10,e.t0=e.catch(0),console.log("There was an error signing in: ",e.t0),e.abrupt("return",this.error("There was an error signing in."));case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(w.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:if(e.prev=2,!this._popUpDisabled){e.next=5;break}throw new Error("Popup disabled. Change 'AuthorizeService.js:AuthorizeService._popupDisabled' to false to enable it.");case 5:return e.next=7,this.userManager.signoutPopup(this.createArguments());case 7:return this.updateState(void 0),e.abrupt("return",this.success(t));case 11:return e.prev=11,e.t0=e.catch(2),console.log("Popup signout error: ",e.t0),e.prev=14,e.next=17,this.userManager.signoutRedirect(this.createArguments(t));case 17:return e.abrupt("return",this.redirect());case 20:return e.prev=20,e.t1=e.catch(14),console.log("Redirect signout error: ",e.t1),e.abrupt("return",this.error(e.t1));case 24:case"end":return e.stop()}}),e,this,[[2,11],[14,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"completeSignOut",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureUserManagerInitialized();case 2:return e.prev=2,e.next=5,this.userManager.signoutCallback(t);case 5:return n=e.sent,this.updateState(null),e.abrupt("return",this.success(n&&n.data));case 10:return e.prev=10,e.t0=e.catch(2),console.log("There was an error trying to log out '".concat(e.t0,"'.")),e.abrupt("return",this.error(e.t0));case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateState",value:function(e){this._user=e,this._isAuthenticated=!!this._user,this.notifySubscribers()}},{key:"subscribe",value:function(e){return this._callbacks.push({callback:e,subscription:this._nextSubscriptionId++}),this._nextSubscriptionId-1}},{key:"unsubscribe",value:function(e){var t=this._callbacks.map((function(t,n){return t.subscription===e?{found:!0,index:n}:{found:!1}})).filter((function(e){return!0===e.found}));if(1!==t.length)throw new Error("Found an invalid number of subscriptions ".concat(t.length));this._callbacks.splice(t[0].index,1)}},{key:"notifySubscribers",value:function(){for(var e=0;e<this._callbacks.length;e++){(0,this._callbacks[e].callback)()}}},{key:"createArguments",value:function(e){return{useReplaceToNavigate:!0,data:e}}},{key:"error",value:function(e){return{status:I.Fail,message:e}}},{key:"success",value:function(e){return{status:I.Success,state:e}}},{key:"redirect",value:function(){return{status:I.Redirect}}},{key:"ensureUserManagerInitialized",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n,a=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.userManager){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(M.ApiAuthorizationClientConfigurationUrl);case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Could not load settings for '".concat("Greenwell","'"));case 7:return e.next=9,t.json();case 9:(n=e.sent).automaticSilentRenew=!0,n.includeIdTokenInSilentRenew=!0,n.userStore=new y.WebStorageStateStore({prefix:"Greenwell"}),this.userManager=new y.UserManager(n),this.userManager.events.addUserSignedOut(Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.userManager.removeUser();case 2:a.updateState(void 0);case 3:case"end":return e.stop()}}),e)}))));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"instance",get:function(){return N}}]),e}()),B=N,I={Redirect:"redirect",Success:"success",Fail:"fail"},T=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={isAuthenticated:!1,userName:null,role:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._subscription=B.subscribe((function(){return e.populateState()})),this.populateState()}},{key:"componentWillUnmount",value:function(){B.unsubscribe(this._subscription)}},{key:"populateState",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([B.isAuthenticated(),B.getUser()]);case 2:t=e.sent,n=Object(b.a)(t,2),a=n[0],r=n[1],this.setState({isAuthenticated:a,userName:r&&r.name,role:r&&r.role});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isAuthenticated,n=e.userName;e.role;if(t){var a="".concat(M.Profile),r={pathname:"".concat(M.LogOut),state:{local:!0}};return this.authenticatedView(n,a,r)}var s="".concat(M.Login);return this.anonymousView(s)}},{key:"authenticatedView",value:function(e,t,n){if(null!=this.state.role)return"Administrator"==this.state.role?r.a.createElement(a.Fragment,null,r.a.createElement(f.c,null,r.a.createElement(f.d,{tag:i.b,className:"text-dark",to:t},"Hello ",e)),r.a.createElement(f.c,null,r.a.createElement(f.d,{tag:i.b,className:"text-dark",to:n},"Logout")),r.a.createElement(f.c,null,r.a.createElement(f.d,{tag:i.b,className:"text-dark",to:"/Admin/Manage"},"Admin Only/Handle Users"))):r.a.createElement(a.Fragment,null,r.a.createElement(f.c,null,r.a.createElement(f.d,{tag:i.b,className:"text-dark",to:t},"Hello ",e," | Employee")),r.a.createElement(f.c,null,r.a.createElement(f.d,{tag:i.b,className:"text-dark",to:n},"Logout")))}},{key:"anonymousView",value:function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(f.c,null,r.a.createElement(f.d,{tag:i.b,className:"text-dark",to:e},"Login")))}}]),t}(a.Component),P=(n(169),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).toggleNavbar=n.toggleNavbar.bind(Object(p.a)(n)),n.state={collapsed:!0},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement(f.e,{className:"navbar-expand-sm navbar-toggleable-sm ng-white border-bottom box-shadow mb-3",light:!0},r.a.createElement(f.b,null,r.a.createElement(f.f,{tag:i.b,to:"/"},"Greenwell"),r.a.createElement(f.g,{onClick:this.toggleNavbar,className:"mr-2"}),r.a.createElement(f.a,{className:"d-sm-inline-flex flex-sm-row-reverse",isOpen:!this.state.collapsed,navbar:!0},r.a.createElement("ul",{className:"navbar-nav flex-grow"},r.a.createElement(T,null))))))}}]),t}(a.Component));P.displayName=P.name;var R=n(314),D=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{style:{padding:"0px"},fluid:!0},this.props.children)))}}]),t}(a.Component);D.displayName=D.name;var L=n(109),z=n(319),W=n(152),G=n(321),J=n(315),H=n(154),Y=n(323),_=n(322),Z=n(320),K=n(316),V=n(153),X=n(317),Q=n(52),q=n.n(Q),$=n(157),ee=n(107),te=n.n(ee),ne=n(13),ae=n(14),re=(n(307),n(308),n(149)),se=n.n(re),oe=n(150),ie=n.n(oe),le=n(74),ce=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).displayName=t.name,n.handleFileSelection=function(e){n.setState({uploadFilePath:"",downloadFileName:e.key})},n.handleFolderSelection=function(e){n.setState({uploadFilePath:e.key,downloadFileName:""})},n.handleCreateFolder=function(e){var t=new FormData;t.append("folderPath",e),function(){var a=Object(w.a)(v.a.mark((function a(){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B.getAccessToken();case 2:return r=a.sent,a.next=5,fetch("api/GreenWellFiles/AddAFolder",{method:"POST",body:t,headers:r?{Authorization:"Bearer ".concat(r)}:{}});case 5:return s=a.sent,a.next=8,s.json();case 8:"200"===(o=a.sent).status?(n.setState((function(t){return t.files=t.files.concat([{key:e}]),t})),alert(o.message)):alert(o.message);case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()},n.handleDeleteFolder=function(e){var t=new FormData;t.append("folderPath",e.toString()),function(){var a=Object(w.a)(v.a.mark((function a(){var r,s,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B.getAccessToken();case 2:return r=a.sent,a.next=5,fetch("api/GreenWellFiles/DeleteAFolder",{method:"POST",body:t,headers:r?{Authorization:"Bearer ".concat(r)}:{}});case 5:return s=a.sent,a.next=8,s.json();case 8:"200"===(o=a.sent).status?(n.setState((function(t){var n=[];return t.files.map((function(t){t.key.substr(0,e.toString().length)!=e&&n.push(t)})),t.uploadFilePath="",t.files=n,t})),alert(o.message)):alert(o.message);case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()},n.handleRenameFolder=function(e,t){"/"==e.charAt(0)&&(e=e.substring(1,e.length));var a=[e,t];(function(){var a=Object(w.a)(v.a.mark((function a(r){var s,o,i;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B.getAccessToken();case 2:return s=a.sent,a.next=5,fetch("api/GreenWellFiles/RenameAFolder",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(r)});case 5:return o=a.sent,a.next=8,o.json();case 8:"200"===(i=a.sent).status?(n.setState((function(n){var a=[];return n.files.map((function(n){n.key.substr(0,e.length)===e?a.push(Object(L.a)({},n,{key:n.key.replace(e,t)})):a.push(n)})),n.uploadFilePath=t,n.files=a,n})),alert(i.message)):alert(i.message);case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}})()(a)},n.handleRenameFile=function(e,t){var a=[e,t];(function(){var a=Object(w.a)(v.a.mark((function a(r){var s,o,i;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B.getAccessToken();case 2:return s=a.sent,a.next=5,fetch("api/GreenWellFiles/RenameAFile",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(r)});case 5:return o=a.sent,a.next=8,o.json();case 8:"200"===(i=a.sent).status?(n.setState((function(a){n.setState((function(n){var a=[];return n.files.map((function(n){n.key===e?a.push(Object(L.a)({},n,{key:t,size:1e3,modified:+q()()})):a.push(n)})),n.files=a,n.downloadFileName=t,n}))})),alert(i.message)):alert(i.message);case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}})()(a)},n.handleDeleteFile=function(e){var t=e.toString();(function(){var t=Object(w.a)(v.a.mark((function t(a){var r,s,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getAccessToken();case 2:return r=t.sent,t.next=5,fetch("api/GreenWellFiles/DeleteAFile",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 5:return s=t.sent,t.next=8,s.json();case 8:"200"===(o=t.sent).status?(n.setState((function(t){var n=[];return t.files.map((function(t){t.key.toString()!==e.toString()&&n.push(t)})),t.files=n,t.downloadFileName="",t})),alert(o.message)):alert(o.message);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()(t)},n.handleModalClose=function(){n.setState({showModal:!1,uploadFile:null,uploadFileName:"",uploadFilePath:"",uploading:!1})},n.handleModalShow=function(){n.setState({showModal:!0,uploading:!0})},n.openBrowseDialog=function(e){e.click()},n.handleSelectedFiles=function(e){var t=e.currentTarget.files;n.setState({uploadFile:t[0],uploadFileName:t[0].name})},n.handleAddFileFromUpload=function(){var e,t=[];if(0==!n.state.tagsForFileUpload.length)for(e=0;e<n.state.tagsForFileUpload.length;e++)"object"===typeof n.state.tagsForFileUpload[e]?t.push(n.state.tagsForFileUpload[e].label):t.push(n.state.tagsForFileUpload[e]);var a=n.state.uploadFilePath+n.state.uploadFileName;(function(){var e=Object(w.a)(v.a.mark((function e(){var r,s,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("path",a),r.append("f",n.state.uploadFile),r.append("tags",t),null==document.getElementById("adminCheckBox")?r.append("adminAccessOnly",document.getElementById("adminCheckBox")):r.append("adminAccessOnly",document.getElementById("adminCheckBox").checked),e.next=7,B.getAccessToken();case 7:return s=e.sent,e.next=10,fetch("Administrator"==n.state.role?"api/GreenWellFiles/AdminAddFileFromUpload":"api/GreenWellFiles/AddFileFromUpload",{method:"POST",body:r,headers:s?{Authorization:"Bearer ".concat(s)}:{}});case 10:return o=e.sent,e.next=13,o.json();case 13:if("200"!==(i=e.sent).status){e.next=24;break}if("Administrator"!=n.state.role){e.next=19;break}n.setState((function(e){var t=[];t.push({key:n.state.uploadFilePath+n.state.uploadFileName,size:1e3,modified:+q()()});var a=[];return t.map((function(t){var n=!1;e.files.map((function(e){e.key===t.key&&(n=!0)})),n||a.push(t)})),e.files=e.files.concat(a),e})),e.next=21;break;case 19:return n.setState({showAlertModal:!0,showModal:!1,uploadFile:null,uploadFileName:"",uploadFilePath:"",uploading:!1,alertMessage:"File has been sent for approval."}),e.abrupt("return");case 21:n.setState({showModal:!1,uploadFile:null,uploadFileName:"",uploadFilePath:"",uploading:!1}),e.next=25;break;case 24:"201"===i.status&&n.setState({showAlertModal:!0,showModal:!1,uploadFile:null,uploadFileName:"",uploadFilePath:"",uploading:!1,alertMessage:"Unable to upload duplicate file."});case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()},n.handleFileDownload=function(){var e=n.state.downloadFileName,t=e.split("/")[e.split("/").length-1];(function(){var n=Object(w.a)(v.a.mark((function n(){var a,r,s,o;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new FormData).append("filePath",e),n.next=4,B.getAccessToken();case 4:return r=n.sent,n.next=7,fetch("api/GreenWellFiles/DownloadAFile",{method:"POST",body:a,headers:r?{Authorization:"Bearer ".concat(r)}:{}});case 7:return s=n.sent,n.next=10,s.blob();case 10:o=n.sent,Object(le.saveAs)(o,t);case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()},n.setFiles=function(e){var t,a=[];for(t=0;t<e.length;t++){var r={key:e[t],size:1e3,modified:+q()()};a.push(r)}n.setState({loading:!1,files:a})},n.state={loading:!0,files:[],showModal:!1,uploadFile:null,uploadFileName:"",uploadFilePath:"",tagsForFileUpload:[],changeModalBody:!1,tagsForFilter:[],showAlertModal:!1,alertMessage:null,downloadFileName:"",uploading:!1,searchBy:"fileName",role:null},n.createStorage(),n.populateState(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"createStorage",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAccessToken();case 2:t=e.sent,fetch("api/GreenWellFiles/CreateLocalStorage",{headers:t?{Authorization:"Bearer ".concat(t)}:{}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"populateState",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n,a,r,s=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=Object(w.a)(v.a.mark((function e(t){var n,a,r,o,i,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAccessToken();case 2:return n=e.sent,e.next=5,fetch(t?"api/GreenWellFiles/AdminGetAllFiles":"api/GreenWellFiles/GetAllFiles",{method:"POST",headers:n?{Authorization:"Bearer ".concat(n)}:{}});case 5:return a=e.sent,e.next=8,a.json();case 8:if(0==(r=e.sent).files.length)s.setState({loading:!1,files:[],tagsForFilter:[]});else{for(i=[],o=0;o<r.files.length;o++)l={key:r.files[o],size:1e3,modified:+q()()},i.push(l);s.setState({loading:!1,files:i,tagsForFilter:r.tags})}case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,Promise.all([B.getUser()]);case 3:n=e.sent,a=Object(b.a)(n,1),r=a[0],this.setState({role:r&&r.role},(function(){return t("Administrator"==s.state.role)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,a=this,s=this.state,o=s.loading,i=(s.changeModalBody,s.uploadFile,s.uploadFileName),l=(s.uploadFilePath,s.tagsForFilter);""===i&&(e=r.a.createElement(z.a.Header,{style:{backgroundColor:"whiteSmoke"},closeButton:!0},r.a.createElement(z.a.Title,null,"Upload A File.")),t=null),""!==i&&(e=r.a.createElement(z.a.Header,{style:{backgroundColor:"whiteSmoke"},closeButton:!0},r.a.createElement(z.a.Title,null,i)),t=r.a.createElement($.a,{id:"tags",onChange:function(e){return a.setState({tagsForFileUpload:e})},multiple:!0,allowNew:!0,placeholder:"Add Tags (optional)",options:l,selectHintOnEnter:!0,ref:function(e){return a._typeahead=e}})),""===i&&(n=r.a.createElement(W.a,{variant:"secondary",onClick:function(){return a.openBrowseDialog(document.getElementById("dialog"))}},"Browse")),""!==i&&(n=r.a.createElement(W.a,{variant:"secondary",onClick:function(){return a.handleAddFileFromUpload()}},"Upload"));var c,u=null,d=r.a.createElement(te.a,{files:this.state.files,icons:{File:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.b}),Image:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.h}),PDF:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.d}),Rename:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.e}),Folder:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.f}),FolderOpen:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.g}),Delete:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.m}),Loading:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.k})},onCreateFolder:this.handleCreateFolder,onRenameFolder:this.handleRenameFolder,onRenameFile:this.handleRenameFile,onSelectFile:this.handleFileSelection,onSelectFolder:this.handleFolderSelection});null!=this.state.role&&"Administrator"==this.state.role&&(d=r.a.createElement(te.a,{files:this.state.files,icons:{File:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.b}),Image:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.h}),PDF:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.d}),Rename:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.e}),Folder:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.f}),FolderOpen:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.g}),Delete:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.m}),Loading:r.a.createElement(ne.a,{className:"fa-2x",icon:ae.k})},onDeleteFolder:this.handleDeleteFolder,onDeleteFile:this.handleDeleteFile,onCreateFolder:this.handleCreateFolder,onRenameFolder:this.handleRenameFolder,onRenameFile:this.handleRenameFile,onSelectFile:this.handleFileSelection,onSelectFolder:this.handleFolderSelection}),""!==i&&(u=r.a.createElement("div",null,r.a.createElement(G.a.Check,{id:"adminCheckBox",type:"checkbox",label:"Show file to Admin Users only."}),r.a.createElement("br",null)))),o&&(c=r.a.createElement("div",{style:{paddingLeft:"40px",marginTop:"20px"}},r.a.createElement("h1",null,"Loading"),r.a.createElement(ne.a,{className:"fa-2x",icon:ae.k,pulse:!0})));var h=r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(W.a,{onClick:this.handleFileDownload},"Download"));return""===this.state.downloadFileName.trim()&&(h=r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(W.a,{style:{cursor:"default",backgroundColor:"gray"}},"Download"))),o||(c=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"file_browser",className:"div-files"},d),h,r.a.createElement(z.a,{show:this.state.showModal,onHide:this.handleModalClose},e,t,r.a.createElement(z.a.Footer,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement(R.a,null,r.a.createElement(J.a,null,r.a.createElement(H.a,{style:{width:"100%",textAlign:"center"}},u)),r.a.createElement(J.a,null,r.a.createElement(H.a,{style:{width:"50%",textAlign:"center"}},r.a.createElement(W.a,{variant:"secondary",onClick:this.handleModalClose},"Close")),r.a.createElement(H.a,{style:{width:"50%",textAlign:"center"}},n))),r.a.createElement(G.a.Control,{id:"dialog",onChange:this.handleSelectedFiles,type:"file"}))),r.a.createElement(he,{handleModalShow:this.handleModalShow}),r.a.createElement(z.a,{centered:!0,show:this.state.showAlertModal,onEnter:function(){document.getElementById("alert").innerHTML=a.state.alertMessage},onHide:function(){return a.setState({showAlertModal:!1,alertMesssage:null})}},r.a.createElement(z.a.Body,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement("p",{id:"alert"})),r.a.createElement(z.a.Footer,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement(W.a,{onClick:function(){a.setState({showAlertModal:!1,alertMesssage:null})},variant:"primary"},"Ok"))))),r.a.createElement("div",null,r.a.createElement(ue,{setParentForFiles:this.setFiles}),c)}}]),t}(a.Component),ue=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).displayName=t.name,n.Search=function(e){(function(){var e=Object(w.a)(v.a.mark((function e(t){var a,r,s,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t,n.state.searchBy,n.state.role],e.next=3,B.getAccessToken();case 3:return r=e.sent,e.next=6,fetch("Administrator"==n.state.role?"api/GreenWellFiles/AdminSearch":"api/GreenWellFiles/Search",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 6:return s=e.sent,e.next=9,s.json();case 9:o=e.sent,n.props.setParentForFiles(o.files);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(e)},n.setSearchBy=function(e){""!==document.getElementById("search").value.toString().trim()?n.setState({searchBy:e},(function(){return n.Search(document.getElementById("search").value.toString().trim())})):n.setState({searchBy:e})},n.state={role:null,searchBy:"fileName"},n.populateState(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"populateState",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([B.getUser()]);case 2:t=e.sent,n=Object(b.a)(t,1),a=n[0],this.setState({role:a&&a.role});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Y.a,{className:"GreenWell-Nav-Menu"},r.a.createElement(_.a,{className:"ml-auto"},r.a.createElement(Z.a,{onSelect:function(t){return e.setSearchBy(t)},as:K.a},r.a.createElement(Z.a.Toggle,{id:"dropdown"}),r.a.createElement(Z.a.Menu,null,r.a.createElement(Z.a.Item,{className:"drop-down-item-style",eventKey:"fileName",active:"fileName"===this.state.searchBy},"Search By File Name"),r.a.createElement(Z.a.Item,{className:"drop-down-item-style",eventKey:"tags",active:"tags"===this.state.searchBy}," By Tags"))),r.a.createElement(G.a,{inline:!0},r.a.createElement(V.a,{id:"search",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},onChange:function(){return e.Search(document.getElementById("search").value)},style:{height:"45px",backgroundColor:"transparent",border:"2px solid white"},type:"text",placeholder:"Search"}),r.a.createElement(W.a,{onClick:function(){return e.Search(document.getElementById("search").value)},className:"search-button"},r.a.createElement(X.a,{src:ie.a})))))}}]),t}(a.Component),de=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(J.a,{style:{marginTop:"15px",float:"right",paddingRight:"50px"},className:"ml-auto"},r.a.createElement("button",{onClick:this.props.handleModalShow,style:{paddingRight:"50px",width:"50px",border:"none"},className:"upload-Button1"},r.a.createElement(X.a,{src:se.a})),r.a.createElement("button",{onClick:this.props.handleModalShow,style:{border:"none",marginLeft:"2px"},className:"upload-Button2"},"Upload"))}}]),t}(a.Component),he=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"upload-footer"},r.a.createElement(de,{handleModalShow:this.props.handleModalShow}))}}]),t}(a.Component),me=n(318),pe=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).resolveFile=function(){var e=Object(w.a)(v.a.mark((function e(t,a){var r,s,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAccessToken();case 2:return r=e.sent,(s=new FormData).append("fullPath",t),s.append("approval",a),e.next=8,fetch("api/GreenWellFiles/ResolveApproval",{method:"POST",body:s,headers:r?{Authorization:"Bearer ".concat(r)}:{}});case 8:return o=e.sent,e.next=11,o.json();case 11:e.sent,n.setState((function(e){var n=[];return e.files.map((function(e){e.key.fullPath!==t&&n.push(e)})),e.files=n,e.showApproveModal=!1,e.showRejectModal=!1,e}));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.downloadFile=function(){var e=Object(w.a)(v.a.mark((function e(t){var n,a,r,s,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("/")[t.split("/").length-1],(a=new FormData).append("filePath",t),e.next=5,B.getAccessToken();case 5:return r=e.sent,e.next=8,fetch("api/GreenWellFiles/DownloadAFile",{method:"POST",body:a,headers:r?{Authorization:"Bearer ".concat(r)}:{}});case 8:return s=e.sent,e.next=11,s.blob();case 11:o=e.sent,Object(le.saveAs)(o,n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.deleteAUser=function(){var e=Object(w.a)(v.a.mark((function e(t){var a,r,s,o,i,l,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([B.getUser()]);case 2:return a=e.sent,r=Object(b.a)(a,1),s=r[0],e.next=7,B.getAccessToken();case 7:return o=e.sent,(i=new FormData).append("currentUser",s.name),i.append("userToDelete",t),e.next=13,fetch("api/AdminOnly/DeleteUser",{method:"POST",body:i,headers:o?{Authorization:"Bearer ".concat(o)}:{}});case 13:return l=e.sent,e.next=16,l.json();case 16:c=e.sent,n.setState({adminUsers:c.adminUsers,nonAdminUsers:c.nonAdminUsers,showDeleteUserModal:!1,userInAction:null});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.makeUserAdmin=function(){var e=Object(w.a)(v.a.mark((function e(t){var a,r,s,o,i,l,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([B.getUser()]);case 2:return a=e.sent,r=Object(b.a)(a,1),s=r[0],e.next=7,B.getAccessToken();case 7:return o=e.sent,(i=new FormData).append("currentUser",s.name),i.append("userToMakeAdmin",t),e.next=13,fetch("api/AdminOnly/MakeUserAdmin",{method:"POST",body:i,headers:o?{Authorization:"Bearer ".concat(o)}:{}});case 13:return l=e.sent,e.next=16,l.json();case 16:c=e.sent,n.setState({adminUsers:c.adminUsers,nonAdminUsers:c.nonAdminUsers,showMakeUserAdminModal:!1,userInAction:null});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.makeUserNonAdmin=function(){var e=Object(w.a)(v.a.mark((function e(t){var a,r,s,o,i,l,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([B.getUser()]);case 2:return a=e.sent,r=Object(b.a)(a,1),s=r[0],e.next=7,B.getAccessToken();case 7:return o=e.sent,(i=new FormData).append("currentUser",s.name),i.append("userToMakeNonAdmin",t),e.next=13,fetch("api/AdminOnly/MakeUserNonAdmin",{method:"POST",body:i,headers:o?{Authorization:"Bearer ".concat(o)}:{}});case 13:return l=e.sent,e.next=16,l.json();case 16:c=e.sent,n.setState({adminUsers:c.adminUsers,nonAdminUsers:c.nonAdminUsers,showMakeAdminNonAdminModal:!1,userInAction:null});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.validateEmail=function(e){return!!/^[a-zA-Z0-9!#$%&'*+-/=?^_`{|]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(e)},n.validateUsername=function(e){return!!/^[a-zA-Z0-9-._@+ ]+$/.test(e)},n.addUser=function(){var e=Object(w.a)(v.a.mark((function e(t,a){var r,s,o,i,l,c,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([B.getUser()]);case 2:return r=e.sent,s=Object(b.a)(r,1),o=s[0],e.next=7,B.getAccessToken();case 7:return i=e.sent,(l=new FormData).append("currentUser",o.name),l.append("userEmail",t),l.append("userName",a),e.next=14,fetch("api/AdminOnly/AddUser",{method:"POST",body:l,headers:i?{Authorization:"Bearer ".concat(i)}:{}});case 14:return c=e.sent,e.next=17,c.json();case 17:u=e.sent,n.setState({adminUsers:u.adminUsers,nonAdminUsers:u.nonAdminUsers,showMakeAdminNonAdminModal:!1,userInAction:null});case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.state={loading:!0,adminUsers:null,nonAdminUsers:null,showDeleteUserModal:!1,showMakeUserAdminModal:!1,showMakeAdminNonAdminModal:!1,showApproveModal:!1,showRejectModal:!1,showAddUserModal:!1,userInAction:null,files:[],fileSelected:null};var a=function(){var e=Object(w.a)(v.a.mark((function e(){var t,a,r,s,o,i,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([B.getUser()]);case 2:return t=e.sent,a=Object(b.a)(t,1),r=a[0],e.next=7,B.getAccessToken();case 7:return s=e.sent,(o=new FormData).append("currentUser",r.name),e.next=12,fetch("api/AdminOnly/GetUsers",{method:"POST",body:o,headers:s?{Authorization:"Bearer ".concat(s)}:{}});case 12:return i=e.sent,e.next=15,i.json();case 15:l=e.sent,n.setState({adminUsers:l.adminUsers,nonAdminUsers:l.nonAdminUsers,loading:!1});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(w.a)(v.a.mark((function e(){var t,a,r,s,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAccessToken();case 2:return t=e.sent,e.next=5,fetch("api/GreenWellFiles/UnapprovedFiles",{method:"POST",headers:t?{Authorization:"Bearer ".concat(t)}:{}});case 5:return a=e.sent,e.next=8,a.json();case 8:if(0==(r=e.sent).files.length)n.setState({files:[]});else{for(o=[],s=0;s<r.files.length;s++)i={key:r.files[s]},o.push(i);n.setState({files:o})}case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a(),r(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{style:{paddingLeft:"40px",marginTop:"20px"}},r.a.createElement("h1",null,"Loading"),r.a.createElement(ne.a,{className:"fa-2x",icon:ae.k,pulse:!0}));return this.state.loading||(t=r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{show:this.state.showDeleteUserModal,onHide:function(){return e.setState({showDeleteUserModal:!1,userInAction:null})}},r.a.createElement(z.a.Header,{style:{backgroundColor:"whiteSmoke"},closeButton:!0},r.a.createElement(z.a.Title,null,"Confirm")),r.a.createElement(z.a.Body,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement("p",null,"Are you sure you want to delete this user?")),r.a.createElement(z.a.Footer,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement(W.a,{onClick:function(){return e.setState({showDeleteUserModal:!1,userInAction:null})},variant:"secondary"},"Cancel"),r.a.createElement(W.a,{onClick:function(){return e.deleteAUser(e.state.userInAction)},variant:"primary"},"Delete"))),r.a.createElement(z.a,{show:this.state.showMakeUserAdminModal,onHide:function(){return e.setState({showMakeUserAdminModal:!1,userInAction:null})}},r.a.createElement(z.a.Header,{style:{backgroundColor:"whiteSmoke"},closeButton:!0},r.a.createElement(z.a.Title,null,"Confirm")),r.a.createElement(z.a.Body,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement("p",null,"Are you sure you want to make this user an Admin?")),r.a.createElement(z.a.Footer,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement(W.a,{onClick:function(){return e.setState({showMakeUserAdminModal:!1,userInAction:null})},variant:"secondary"},"Cancel"),r.a.createElement(W.a,{onClick:function(){return e.makeUserAdmin(e.state.userInAction)},variant:"primary"},"Make Admin"))),r.a.createElement(z.a,{show:this.state.showMakeAdminNonAdminModal,onHide:function(){return e.setState({showMakeAdminNonAdminModal:!1,userInAction:null})}},r.a.createElement(z.a.Header,{style:{backgroundColor:"whiteSmoke"},closeButton:!0},r.a.createElement(z.a.Title,null,"Confirm")),r.a.createElement(z.a.Body,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement("p",null,"Are you sure you want to remove this user's Admin status?")),r.a.createElement(z.a.Footer,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement(W.a,{onClick:function(){return e.setState({showMakeAdminNonAdminModal:!1,userInAction:null})},variant:"secondary"},"Cancel"),r.a.createElement(W.a,{onClick:function(){return e.makeUserNonAdmin(e.state.userInAction)},variant:"primary"},"Make Non-Admin"))),r.a.createElement(z.a,{show:this.state.showAddUserModal,onHide:function(){return e.setState({showAddUserModal:!1,userInAction:null})}},r.a.createElement(z.a.Header,{style:{backgroundColor:"whiteSmoke"},closeButton:!0},r.a.createElement(z.a.Title,null,"Add New User")),r.a.createElement(z.a.Body,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement("p",null,"The user will receive an email instructing them how to finish setting up their account."),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("b",null,"Name  "),r.a.createElement("br",null),r.a.createElement("input",{type:"name",id:"name"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("b",null,"Email  "),r.a.createElement("br",null),r.a.createElement("input",{type:"email",id:"email"})),r.a.createElement("br",null),r.a.createElement("b",{id:"error",style:{color:"red"}})),r.a.createElement(z.a.Footer,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement(W.a,{onClick:function(){return e.setState({showAddUserModal:!1,userInAction:null})},variant:"secondary"},"Cancel"),r.a.createElement(W.a,{onClick:function(){e.validateEmail(document.getElementById("email").value)?e.validateUsername(document.getElementById("name").value)?(document.getElementById("error").innerHTML="",e.addUser(document.getElementById("email").value,document.getElementById("name").value),e.setState({showAddUserModal:!1,userInAction:null})):document.getElementById("error").innerHTML="Invalid Name":document.getElementById("error").innerHTML="Invalid Email"},variant:"primary"},"Add"))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("h3",null,"Admin Actions")),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,style:{width:"85%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Actions"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Role"))),r.a.createElement("tbody",null,0==this.state.adminUsers.length&&0==this.state.nonAdminUsers.length&&r.a.createElement("tr",null,r.a.createElement("th",null,"No Users (Only one main current Admin User)."),r.a.createElement("th",null,"No Users (Only one main current Admin User)."),r.a.createElement("th",null,"No Users (Only one main current Admin User).")),0!=this.state.adminUsers.length&&this.state.adminUsers.map((function(t){return r.a.createElement("tr",{key:t.email},r.a.createElement("td",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{onClick:function(){return e.setState({showDeleteUserModal:!0,userInAction:t.email})}},r.a.createElement(ne.a,{title:"Delete User",style:{color:"#73a353"},className:"fa-2x",icon:ae.m})),r.a.createElement(i.b,{onClick:function(){return e.setState({showMakeAdminNonAdminModal:!0,userInAction:t.email})}},r.a.createElement(ne.a,{title:"Remove Admin Role",style:{color:"#73a353",marginLeft:"15px"},className:"fa-2x",icon:ae.i})))),r.a.createElement("td",null,t.userName),r.a.createElement("td",null,t.email),r.a.createElement("td",null,"Admin User"))})),0!=this.state.nonAdminUsers.length&&this.state.nonAdminUsers.map((function(t){return r.a.createElement("tr",{key:t.userName},r.a.createElement("td",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{onClick:function(){return e.setState({showDeleteUserModal:!0,userInAction:t.email})}},r.a.createElement(ne.a,{title:"Delete User",style:{color:"#73a353"},className:"fa-2x",icon:ae.m})),r.a.createElement(i.b,{onClick:function(){return e.setState({showMakeUserAdminModal:!0,userInAction:t.email})}},r.a.createElement(ne.a,{title:"Make User Admin",style:{color:"#73a353",marginLeft:"15px"},className:"fa-2x",icon:ae.j})))),r.a.createElement("td",null,t.userName),r.a.createElement("td",null,t.email),r.a.createElement("td",null,"Default User"))})),r.a.createElement("tr",null,r.a.createElement("th",{style:{borderSpacing:"none",border:"none"}}),r.a.createElement("th",{style:{borderSpacing:"none",border:"none"}}),r.a.createElement("th",{style:{borderSpacing:"none",border:"none"}}),r.a.createElement("th",{style:{borderSpacing:"none",border:"none"}}))))),r.a.createElement(i.b,{onClick:function(){return e.setState({showAddUserModal:!0})}},r.a.createElement(ne.a,{title:"Add New User",style:{color:"#73a353",marginLeft:"8%"},className:"fa-2x",icon:ae.n})),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("h3",null,"Approve Files")),r.a.createElement(z.a,{show:this.state.showApproveModal,onHide:function(){return e.setState({showApproveModal:!1,fileSelected:null})}},r.a.createElement(z.a.Header,{style:{backgroundColor:"whiteSmoke"},closeButton:!0},r.a.createElement(z.a.Title,null,"Confirm")),r.a.createElement(z.a.Body,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement("p",null,"Are you sure you want to approve this file?")),r.a.createElement(z.a.Footer,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement(W.a,{onClick:function(){return e.setState({showApproveModal:!1,fileSelected:null})},variant:"secondary"},"Cancel"),r.a.createElement(W.a,{onClick:function(){return e.resolveFile(e.state.fileSelected,!0)},variant:"primary"},"Approve"))),r.a.createElement(z.a,{show:this.state.showRejectModal,onHide:function(){return e.setState({showRejectModal:!1,fileSelected:null})}},r.a.createElement(z.a.Header,{style:{backgroundColor:"whiteSmoke"},closeButton:!0},r.a.createElement(z.a.Title,null,"Confirm")),r.a.createElement(z.a.Body,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement("p",null,"Are you sure you want to reject this file, it will be permenently deleted from the server.")),r.a.createElement(z.a.Footer,{style:{backgroundColor:"whiteSmoke"}},r.a.createElement(W.a,{onClick:function(){return e.setState({showRejectModal:!1,fileSelected:null})},variant:"secondary"},"Cancel"),r.a.createElement(W.a,{onClick:function(){return e.resolveFile(e.state.fileSelected,!1)},variant:"primary"},"Reject"))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(me.a,{striped:!0,bordered:!0,hover:!0,style:{width:"75%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Actions"),r.a.createElement("th",null,"Filename"))),r.a.createElement("tbody",null,0==this.state.files.length&&r.a.createElement("tr",null,r.a.createElement("th",null,"No files."),r.a.createElement("th",null,"No files.")),0!=this.state.files.length&&this.state.files.map((function(t){return r.a.createElement("tr",{key:t.key.filename},r.a.createElement("td",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{onClick:function(){return e.setState({showApproveModal:!0,fileSelected:t.key.fullPath})}},r.a.createElement(ne.a,{title:"Approve File",style:{color:"#73a353"},className:"fa-2x",icon:ae.a})),r.a.createElement(i.b,{onClick:function(){return e.setState({showRejectModal:!0,fileSelected:t.key.fullPath})}},r.a.createElement(ne.a,{title:"Reject File",style:{color:"#73a353",marginLeft:"15px"},className:"fa-2x",icon:ae.l})),r.a.createElement(i.b,{onClick:function(){return e.downloadFile(t.key.fullPath)}},r.a.createElement(ne.a,{title:"Download File",style:{color:"#73a353",marginLeft:"15px"},className:"fa-2x",icon:ae.c})))),r.a.createElement("td",null,t.key.filename))})),r.a.createElement("tr",null,r.a.createElement("th",{style:{borderSpacing:"none",border:"none"}}),r.a.createElement("th",{style:{borderSpacing:"none",border:"none"}}))))))),r.a.createElement("div",null,t)}}]),t}(a.Component);pe.displayName=pe.name;var fe=n(81),ge=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={ready:!1,authenticated:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._subscription=B.subscribe((function(){return e.authenticationChanged()})),this.populateAuthenticationState()}},{key:"componentWillUnmount",value:function(){B.unsubscribe(this._subscription)}},{key:"render",value:function(){var e=this.state,t=e.ready,n=e.authenticated,a="".concat(M.Login,"?").concat(k,"=").concat(encodeURI(window.location.href));if(t){var s=this.props,o=s.component,i=Object(fe.a)(s,["component"]);return r.a.createElement(m.b,Object.assign({},i,{render:function(e){return n?r.a.createElement(o,e):r.a.createElement(m.a,{to:a})}}))}return r.a.createElement("div",null)}},{key:"populateAuthenticationState",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.isAuthenticated();case 2:t=e.sent,this.setState({ready:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticationChanged",value:function(){var e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1,authenticated:!1}),e.next=3,this.populateAuthenticationState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component),ve=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={ready:!1,authenticated:!1,admin:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._subscription=B.subscribe((function(){return e.authenticationChanged()})),this.populateAuthenticationState()}},{key:"componentWillUnmount",value:function(){B.unsubscribe(this._subscription)}},{key:"render",value:function(){var e=this.state,t=e.ready,n=e.authenticated,a=e.admin;if(t){var s=this.props,o=s.component,i=Object(fe.a)(s,["component"]);return r.a.createElement(m.b,Object.assign({},i,{render:function(e){return n&&a?r.a.createElement(o,e):r.a.createElement("div",null,"You are unauthorized to access this page.")}}))}return r.a.createElement("div",null)}},{key:"populateAuthenticationState",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.isAuthenticated();case 2:return t=e.sent,n=null,e.next=6,B.getUser();case 6:a=e.sent,n=!(!a||"Administrator"!=a.role),this.setState({ready:!0,authenticated:t,admin:n});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticationChanged",value:function(){var e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({ready:!1,authenticated:!1,admin:!1}),e.next=3,this.populateAuthenticationState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component),be=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={message:void 0},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case F:this.login(this.getReturnUrl());break;case O:this.processLoginCallback();break;case j:var t=new URLSearchParams(window.location.search).get(A);this.setState({message:t});break;case U:this.redirectToProfile();break;default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"render",value:function(){var e=this.props.action,t=this.state.message;if(t)return r.a.createElement("div",null,t);switch(e){case F:case O:case U:return r.a.createElement("div",null);default:throw new Error("Invalid action '".concat(e,"'"))}}},{key:"login",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={returnUrl:t},e.next=3,B.signIn(n);case 3:a=e.sent,e.t0=a.status,e.next=e.t0===I.Redirect?7:e.t0===I.Success?8:e.t0===I.Fail?11:13;break;case 7:return e.abrupt("break",14);case 8:return e.next=10,this.navigateToReturnUrl(t);case 10:return e.abrupt("break",14);case 11:return this.setState({message:a.message}),e.abrupt("break",14);case 13:throw new Error("Invalid status result ".concat(a.status,"."));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLoginCallback",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,B.completeSignIn(t);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===I.Redirect?7:e.t0===I.Success?8:e.t0===I.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(M.DefaultLoginRedirectPath);case 10:return e.abrupt("break",14);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status '".concat(n.status,"'."));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(k);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin,"/")}},{key:"redirectToProfile",value:function(){this.redirectToApiAuthorizationPath(M.IdentityManagePath)}},{key:"redirectToApiAuthorizationPath",value:function(e){var t="".concat(window.location.origin).concat(e);window.location.replace(t)}},{key:"navigateToReturnUrl",value:function(e){window.location.replace(e)}}]),t}(a.Component),we=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={message:void 0,isReady:!1,authenticated:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.action;switch(e){case x:window.history.state.state.local?this.logout(this.getReturnUrl()):this.setState({isReady:!0,message:"The logout was not initiated from within the page."});break;case E:this.processLogoutCallback();break;case S:this.setState({isReady:!0,message:"You successfully logged out!"});break;default:throw new Error("Invalid action '".concat(e,"'"))}this.populateAuthenticationState()}},{key:"render",value:function(){var e=this.state,t=e.isReady,n=e.message;if(!t)return r.a.createElement("div",null);if(n)return r.a.createElement("div",null,n);var a=this.props.action;switch(a){case x:return r.a.createElement("div",null,"Processing logout");case E:return r.a.createElement("div",null,"Processing logout callback");case S:return r.a.createElement("div",null,n);default:throw new Error("Invalid action '".concat(a,"'"))}}},{key:"logout",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={returnUrl:t},e.next=3,B.isAuthenticated();case 3:if(!e.sent){e.next=20;break}return e.next=7,B.signOut(n);case 7:a=e.sent,e.t0=a.status,e.next=e.t0===I.Redirect?11:e.t0===I.Success?12:e.t0===I.Fail?15:17;break;case 11:return e.abrupt("break",18);case 12:return e.next=14,this.navigateToReturnUrl(t);case 14:return e.abrupt("break",18);case 15:return this.setState({message:a.message}),e.abrupt("break",18);case 17:throw new Error("Invalid authentication result status.");case 18:e.next=21;break;case 20:this.setState({message:"You successfully logged out!"});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processLogoutCallback",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,B.completeSignOut(t);case 3:n=e.sent,e.t0=n.status,e.next=e.t0===I.Redirect?7:e.t0===I.Success?8:e.t0===I.Fail?11:13;break;case 7:throw new Error("Should not redirect.");case 8:return e.next=10,this.navigateToReturnUrl(this.getReturnUrl(n.state));case 10:return e.abrupt("break",14);case 11:return this.setState({message:n.message}),e.abrupt("break",14);case 13:throw new Error("Invalid authentication result status.");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateAuthenticationState",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.isAuthenticated();case 2:t=e.sent,this.setState({isReady:!0,authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReturnUrl",value:function(e){var t=new URLSearchParams(window.location.search).get(k);if(t&&!t.startsWith("".concat(window.location.origin,"/")))throw new Error("Invalid return url. The return url needs to have the same origin as the current page.");return e&&e.returnUrl||t||"".concat(window.location.origin).concat(M.LoggedOut)}},{key:"navigateToReturnUrl",value:function(e){return window.location.replace(e)}}]),t}(a.Component),ye=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(m.b,{path:M.Login,render:function(){return ke(F)}}),r.a.createElement(m.b,{path:M.LoginFailed,render:function(){return ke(j)}}),r.a.createElement(m.b,{path:M.LoginCallback,render:function(){return ke(O)}}),r.a.createElement(m.b,{path:M.Profile,render:function(){return ke(U)}}),r.a.createElement(m.b,{path:M.LogOut,render:function(){return Ae(x)}}),r.a.createElement(m.b,{path:M.LogOutCallback,render:function(){return Ae(E)}}),r.a.createElement(m.b,{path:M.LoggedOut,render:function(){return Ae(S)}}))}}]),t}(a.Component);function ke(e){return r.a.createElement(be,{action:e})}function Ae(e){return r.a.createElement(we,{action:e})}var Ee=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(D,null,r.a.createElement(ge,{exact:!0,path:"/",component:ce}),r.a.createElement(ve,{exact:!0,path:"/Admin/Manage",component:pe}),r.a.createElement(m.b,{path:M.ApiAuthorizationPrefix,component:ye}))}}]),t}(a.Component);Ee.displayName=Ee.name;var xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Se(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Fe=document.getElementsByTagName("base")[0].getAttribute("href"),Oe=document.getElementById("root");o.a.render(r.a.createElement(i.a,{basename:Fe},r.a.createElement(Ee,null)),Oe),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");xe?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Se(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Se(e)}))}}()}},[[158,1,2]]]);
//# sourceMappingURL=main.e4f13e7a.chunk.js.map